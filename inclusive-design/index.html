<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>An Inclusive Web is Fast by Default - @SimonHearne</title>
		<base target="_blank"></base>
		<meta name="description" content="Presentation: An Inclusive Web is Fast by Default.">
		<meta name="author" content="Simon Hearne">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="../css/reveal.css">
		<link rel="stylesheet" href="../css/theme/simon2.css" id="theme">

		<meta property="og:image" content="https://simonhearne.com/presentations/psych-speed/social.png" />
		<meta property="og:image:width" content=1200 />
		<meta property="og:image:height" content=600 />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:creator" content="@SimonHearne" />
		<meta name="twitter:title" content="Presentation: An Inclusive Web is Fast by Default.">
		<meta name="twitter:description" content="" />
		<meta name="twitter:image" content="https://simonhearne.com/presentations/psych-speed/social.png" />
		
		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '../css/print/pdf.css' : '../css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>
		<div class="reveal">
			<div class="smaller tagline"><a style="color: white !important" href="https://twitter.com/simonhearne">@SimonHearne</a></div>
			<!-- Entertain, inform, educate -->
			<div class="slides">
				<section data-state="title-slide">
					<h1>An Inclusive Web is <span style="font-style:oblique;">Fast by Default</span></h1>
					<p style="margin:0;">Simon Hearne</p>
					<p class="smaller" style="margin:0;">Web Performance Architect</p>
					<aside class="notes">
						Welcome to this presentation on Web Performance and Inclusive Design.<br>
						If you are viewing this live, use keys 'n' and 'p' to navigate the slides.
						Use key 'o' to view an overview. <a style="cursor: pointer" onclick="javascript:Reveal.configure({showNotes: false})">Click here to hide these notes</a> or press 'm' to toggle.
					</aside>
				</section>
				<section id="intro">
					<section>
						<h2>🤔</h2>
						<aside class="notes">
							<p>Take a few seconds to think back to the last time you had poor wifi or cellular connection.<p>
						</aside>
					</section>
					<section data-background="../backgrounds/no-wifi-zone.jpg">
						<h2></h2>
						<aside class="notes">
							<p>For me, it was when I was working from home and my cable internet went out, it happens a few times a year. My home has poor mobile coverage, so I normally use wifi calling. When my cable internet goes out, I get about 20 - 50kbps of downlink over 3G. This is enough for... well not much actually.</p>
							<p>I found myself instantly, temporarily excluded from the internet.</p>
							<p>I could not complete work tasks, browse the web, check my emails. Even though my phone reported *some* signal, most of the web became totally inaccessible.</p>
						</aside>
					</section>
					<section data-background="../backgrounds/tap.jpg">
						<h2 class="dark-bg">We treat connectivity as a utility</h2>
						<aside class="notes">
							<p>I am in a privileged position: my internet connectivity was restored after about 20 minutes. Just as quickly as I had been excluded from the internet I was back in full flow - messages poured in, web pages loaded near-instantly and I soon forgot about the temporary blip in my connection to the matrix.</p>
							<p>The chances are that you are in a similar position to me. A reasonably good home connection, perhaps access to an office with very good connection. A modern smartphone with a 4G chipset, big screen and fast processor, perhaps even 5G!<p>
							<p>For us, access to the web is a utility like gas, water and electricity. It works so well, for so much of the time that we rarely even consider it - perhaps occasionally when travelling through weak spots on a train journey.</p>
						</aside>
					</section>
					
					<section data-state="tertiary-slide">
						<p>65% of people in the developing world do not have access to fast internet</p>
						<p class="fragment">it's 20% in the developed world</p>
						<p class="subtitle bottom-left smallest"><a href="https://www.worldbank.org/en/topic/digitaldevelopment/brief/connecting-for-inclusion-broadband-access-for-all">Connecting for Inclusion: Broadband Access for All. The World Bank.</a>
						<aside class="notes">
							<p>20% of the developed world don't see it like this. 20% of the developed world do not have consistently fast internet connections (65% of the developing world). For them, connectivity is less utility and more luxury. For them, slow devices, slow connections and slow experiences are the norm.</p>
						</aside>
					</section>
					
					<section data-background="../backgrounds/rainbow.jpg">
						<h2>Performance is key to inclusion</h2>
						<aside class="notes">
							<p>Today we are talking about An Inclusive Web, and I would like you to consider how performance - the speed of our apps and websites - is an important factor in inclusivity and accessibility.</p>
						</aside>
					</section>
					
				</section>

				<section>
					<section data-background="../backgrounds/youtube.jpg">
						<h2 class="fragment dark-bg">1,200kB</h2>
						<p class="fragment dark-bg">Feather was under 100kB</p>
						<p class="subtitle smallest bottom-right"><a href="https://blog.chriszacharias.com/page-weight-matters">Page Weight Matters - Chris Zacharias</a></p>
						<aside class="notes">
							<p>Consider YouTube. For me, it is generally an entertainment service. For some folks, it is a source of education, information, news and health advice (for better or for worse). YouTube seems so ubiquitous that, like our connectivity, we might consider it a utility. But what if your connection was too slow to load the video player? Or your device so limited on storage that you had to choose between family photos or the YouTube app?</p>
							<p>Back in 2009 YouTube was a hefty web app. The video player page came in at 1.2MB - before the video had even started to load! Chris Zacharias was a developer on the team and started a project to fix the performance problems - codenamed Project Feather. The engineering work was intense: hand-writing the CSS and JavaScript, manually optimising image sprites and implementing the just-written HTML5 video player to replace the Flash player. The result of this work was a page load in under 100kB with only 14 requests, quite the improvement!</p>
							<p>Project Feather was pushed live with as a small opt-in experiment in order to collect metrics on the success of the project. After a week of data collection - the results were in! The key metric tracked was the page onload event - a standard performance measure in 2009. Take a second to think how much improvement you might expect - reducing page weight by over 90%, swapping Flash for native video, hand-crafting the code for optimal performance. 50% improvement? 100% improvement?</p>
						</aside>
					</section>
					<section class="pull-up" data-background="../backgrounds/turtle.jpg">
						<h2>Feather was slower...</h2>
						<aside class="notes">
							<p>The results were... less than impressive. Project Feather was slower than the legacy player page. Significantly slower.</p>
						</aside>
					</section>
					
					
					<section>
						<h2></h2>
						<img class="plain" loading="lazy" src="media/treo-youtube.svg"/>
						<p class="subtitle smallest bottom-left"><a href="https://treo.sh/sitespeed/m.youtube.com">LCP data from CRUX for m.youtube.com, July 2021</a></p>
						<aside class="notes">
							<p>An investigation ensued to work out what had happened. Performance is a tricky subject because there are so many variables to control for - device, connection, geography, cache state. This hasn't changed in the past 12 years! What the team at YouTube discovered is that the geographic distribution of users who had opted-in to Feather was disproportionately skewed towards Southeast Asia, South America, Africa and other regions with typically slow internet connections. These users had previously been totally locked out of YouTube due to the page weight (some would have to wait twenty minutes just to load the HTML, CSS and JavaScript).</p>
						</aside>
					</section>

					<section>
						<h2></h2>
						<img class="plain" loading="lazy"  src="media/treo-youtube-conns.svg"/>
						<p class="subtitle smallest bottom-left"><a href="https://treo.sh/sitespeed/m.youtube.com">Connection data from CRUX for m.youtube.com, July 2021</a></p>
						<aside class="notes">
							<p>An investigation ensued to work out what had happened. Performance is a tricky subject because there are so many variables to control for - device, connection, geography, cache state. This hasn't changed in the past 12 years! What the team at YouTube discovered is that the geographic distribution of users who had opted-in to Feather was disproportionately skewed towards Southeast Asia, South America, Africa and other regions with typically slow internet connections. These users had previously been totally locked out of YouTube due to the page weight (some would have to wait twenty minutes just to load the HTML, CSS and JavaScript).</p>
						</aside>
					</section>
					<section>
						<h2>Performance is a distribution</h2>
						<img class="plain" loading="lazy" width="50%" src="media/treo-youtube-dist.png" />
						<p class="subtitle smallest bottom-left"><a href="https://treo.sh/sitespeed/m.youtube.com">LCP data from CRUX for m.youtube.com, July 2021</a></p>
					</section>
					<section>
						<h2>So was Feather a success?</h2>
						<aside class="notes">
							<p>Project Feather was in fact a success, it had opened up YouTube and the educational, entertaining and informative content within to millions of new users.</p>
						</aside>
					</section>
					
					<section class="tertiary-slide">
						<h2>What we can learn from Feather</h2>
						<p class="fragment">Being faster by default is more inclusive...</p>
						<p class="fragment">... and that data can be misleading</p>
						<aside class="notes">
							<p>The moral of this story is two-fold:</p>
							<ol>
								<li>Performance IS inclusivity</li>
								<li>Data can be misleading</li>
							</ol>
						</aside>
					</section>
					
					<section>
						<h2>Reasons for low quality internet</h2>
						<ul style="font-size: 85%">
							<li class="fragment">1 in 2 US households have no broadband</li>
							<li class="fragment">15% of the UK has no 4G coverage</li>
							<li class="fragment">Natural disasters</li>
							<li class="fragment">Travel (connection &amp; roaming charges)</li>
							<li class="fragment">Low power / battery saver mode</li>
						</ul>
						<p class="fragment">How many of these do you experience while designing / developing an app?</p>
					</section>
					<section>
						<h2>But our data shows...</h2>
						<ul style="font-size: 85%">
							<li class="fragment">What about 'ghost bounces'?</li>
							<li class="fragment">88% of Firefox users block GA (1)</li>
							<li class="fragment">40% of Safari users block GA (1)</li>
							<li class="fragment">40% more blocking in developing world (2)</li>
							<li class="fragment">CRUX only has data for Chrome</li>
						</ul>
						<p class="fragment">There are many reasons why not all users are represented in your data.</p>
						<p class="subtitle smallest bottom-left">1. <a href="https://plausible.io/blog/google-analytics-adblockers-missing-data#88-of-firefox-users-block-google-analytics">58% of Hacker News, Reddit and tech-savvy audiences block Google Analytics</a><br>2. <a href="https://backlinko.com/ad-blockers-users">Ad Blocker Usage and Demographic Statistics in 2021</a></p>
						<aside class="notes">
							<p>Analytics data is good for general analysis, but beware survivorship bias. Users who never successfully access your application will not appear in your analytics. See <a href="https://simonhearne.com/2017/analytics-lie/">my blog post on this</a>.
							<p><a href="https://plausible.io/blog/google-analytics-adblockers-missing-data#88-of-firefox-users-block-google-analytics">88% of Firefox users block GA</a>.</p>
						</aside>
					</section>
				</section>

				<section id="agenda">
					<section>
						<h2>Building fast, inclusive experiences</h2>
						<ol>
							<li class="fragment">Understanding the problem</li>
							<li class="fragment">Designing for speed</li>
							<li class="fragment">Adapting to the user</li>
							<li class="fragment">Convincing the boss</li>
						</ol>
					</section>
				</section>
				
				<section id="the-problem">
					<section data-state="secondary-slide">
						<h2>Understanding the Problem</h2>
					</section>
					<section class="pull-up">
						<h2>Users are not averages</h2>
						<img loading="lazy" class="roundy plain" style="width: 30%" src="media/ryan_tweet.png"></img>
						<p class="subtitle smallest bottom-left"><a href="https://twitter.com/RyanTownsend/status/1435612305010593801">@RyanTownsend on Twitter</a></p>
					</section>
				</section>
				
				<section id="the-solution">
					<section data-state="secondary-slide">
						<h2>Designing for Speed</h2>
					</section>

					<section data-background="media/goojf.jpg">
						<h2>Get out of jail free</h2>
						<aside class="notes">
							<p>There is a solution which is a bit of a "get out of jail free" card - lite sites</p>
						</aside>
					</section>
					<section>
						<h2>Lite sites for quick loading</h2>
						<img loading="lazy" width="80%" src="media/lite-sites.png">
						<p class="fragment">Fast by default?</p>
						<p class="subtitle smallest bottom-left"><a href="https://github.com/mdibaiee/awesome-lite-websites">awesome-lite-sites</a></p>
					</section>
					<section>
						<h2>Performance must be baked in</h2>
						<aside class="notes">
							<p>Lite sites are an admission that the main application is too heavy. The main application must be light and fast in order to avoid a fragmented experience.</p>
						</aside>
					</section>
					<section>
						<h2>Project Timeline</h2>
						<img class="plain" loading="lazy" src="media/pathtoperf1.svg" />
					</section>
					<section>
						<h2>Project Timeline</h2>
						<img class="plain" loading="lazy" src="media/pathtoperf2.svg" />
					</section>
					<section data-background-color="#941f55" data-background-size="contain" data-background-image="media/mustard.jpg">
						<h2 class="dark-bg">Progressive Enhancement FTW</h2>
						<p class="subtitle smallest bottom-left"><a href="https://speakerdeck.com/patrickhamann/breaking-news-at-1000ms-tech-dot-insight-2014?slide=21">Breaking News at 1000ms - Patrick Hamann</a></p>
					</section>
					<section>
						<h2>Images</h2>
					</section>
					<section>
						<h2>JavaScript</h2>
					</section>
					<section>
						<h2>Rich Media</h2>
					</section>
					<section>
						<h2>Painting Fast</h2>
					</section>
					<section>
						<h2>Prioritising Assets</h2>
					</section>
					<section>
						<h2>Removing Jank</h2>
					</section>
				</section>

				<section id="adapting">
					<section data-state="secondary-slide">
						<h2>Adapting to the User</h2>
						<aside class="notes">
							<p>There are a surprising number of ways that users can let you know about their preferences, many of them can be used to deliver optimal experiences!</p>
						</aside>
					</section>
					<section>
						<h2>Data Saver</h2>
						<img loading="lazy" width="50%" src="https://developers.google.com/web/updates/images/2016/02/save-data/data-saver-chrome.png"/>
						<p class="subtitle smallest bottom-left"><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/save-data">Delivering Fast and Light Applications with Save-Data</a></p>
						<aside class="notes">
							<p>Data saver is a client hint to opt-in to saving data - you can use this to automatically deliver a lighter version of your application</p>
						</aside>
					</section>
					<section>
						<h2>Network Info API</h2>
						<p class="subtitle smallest bottom-left"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Network_Information_API">Network Information API</a></p>
						<pre><code class="language-js">
// navigator.connection
NetworkInformation {
	downlink: 5.4
	effectiveType: "4g"
	onchange: null
	rtt: 150
	saveData: false
}
						</code></pre>
						<aside class="notes">
							<p>The network information API provides access to information about the user's connection - once your page has loaded and JavaScript is available</p>
						</aside>
					</section>
					<section>
						<h2>Client Hints</h2>
						<div class="">
							<pre><code class="language-html">
GET /index.html

accept-ch: Downlink,RTT,Device-Memory,Save-Data,DPR,Width

...

GET /image.jpg

downlink: 6.75
rtt: 100
dpr: 2
width: 1025
device-memory: 8
							</code>
						</div>
						<p class="subtitle smallest bottom-left"><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/client-hints">Adapting to Users with Client Hints</a></p>
						<aside class="notes">
							<p>Client hints provide access to a number of device parameters </p>
						</aside>
					</section>
						
				</section>
				
				<section id="convince-bosses">
					<section data-state="secondary-slide">
						<h2>Convincing the Boss</h2>
						<aside class="notes">
							<p>By now, I'd like to think that you are all convinced of the intrinsic value of improving site speed. Unfortunately some of us also need to convince others that the work is meaningful and time should be scheduled for it.</p>
							<p>Unfortunately, performance as a topic is often under-funded unless there has been a major issue. I'd like to share some tips that I have learned from working on performance projects for a decade.</p>
						</aside>
					</section>
					<section>
						<h2>Buy-In Methods</h2>
						<style>dd { margin-left: 100px !important; padding-bottom: 20px !important; font-size: small; opacity: 0.8;}</style>
						<dl style="font-size: 80%">
							<dt class="fragment">Say pleeeease</dt><dd>10% chance of success</dd>
							<dt class="fragment">Use global stats</dt><dd>20% chance of success</dd>
							<dt class="fragment">Use your own data</dt><dd>30% chance of success</dd>
							<dt class="fragment">Say "SEO" repeatedly</dt><dd>50% chance of success</dd>
							<dt class="fragment">Competitive benchmarking</dt><dd>60% chance of success</dd>
						</dl>
						<aside class="notes">
							<p>Unfortunately, like many things in life, just because something is the right thing to do doesn't mean it will happen. Appealing to folks' competitive nature almost always works, then they will use the data to justify their decisions!</p>
						</aside>
					</section>

				</section>
				
				<section id="practical-tips">
					<section data-state="secondary-slide">
						<h2>Tips to Build Empathy in Design</h2>
					</section>
					<section>
						<h3>1. Use Chrome's throttling features</h3>
						<img loading="lazy" src="media/throttling.jpg" />
					</section>
					<section>
						<h3>2. Set aggressive budgets for JS</h3>
						<p>0kB to render, 100kB total</p>
					</section>
					<section>
						<h3>3. 2G Tuesdays</h3>
						<img loading="lazy" class="plain" src="media/2g.svg" />
						<p class="subtitle smallest bottom-left"><a href="https://engineering.fb.com/2015/10/27/networking-traffic/building-for-emerging-markets-the-story-behind-2g-tuesdays/">Building for emerging markets: The story behind 2G Tuesdays</a></p>
					</section>
					<section>
						<h3>4. Use a low-spec device for testing</h3>
						<img loading="lazy" class="" width="60%" src="media/amazon.jpg" />
						<p class="subtitle smallest bottom-left"><a href="https://www.amazon.co.uk/gp/bestsellers/electronics/356496011">Amazon UK Best Sellers, updated hourly.</a></p>
					</section>
					<section>
						<h3>5. Browse with JavaScript disabled</h3>
						<img loading="lazy" class="" width="60%" src="media/twitter.png" />
					</section>
					<section>
						<h3>6. Consider third-parties</h3>
						<ul>
							<li><a href="https://www.simoahava.com/analytics/track-non-javascript-visits-google-analytics/">GTM &amp; Google Analytics without JavaScript</a></li>
							<li>Remove third-parties with high JS cost</li>
							<li>Defer third-parties until after page load</li>
						</ul>
					</section>
				</section>
				
				<section id="closing">

					<section data-state="tertiary-slide">
						<h2>Performance is all about empathy</h2>
					</section>
					
					<section>
						<blockquote>The future is already here,<br>it's just not evenly distributed</blockquote>
						<p class="smallest" style="text-align: right">William Gibson</p>
					</section>
				</section>

				<section class="pull-up" data-background-image="../backgrounds/passion.jpg">
					<h2 class="dark-bg">Thank you 🙏</h2>
					<p class="dark-bg" style="margin-top: 9em !important;">@SimonHearne<br>simonhearne.com</p>
				</section>
			</div>
			<div id="chart-controls" class="hide"></div>

		</div>

		<script src="../lib/js/head.min.js"></script>
		<script src="../js/reveal-4.1.3.min.js"></script>
		<script src="../lib/js/jquery-3.3.1.min.js"></script>

		<script>
			function sleep(ms) {
				return new Promise(resolve => setTimeout(resolve, ms));
			}
			function getQueryVariable(variable)
			{
				var query = window.location.search.substring(1);
				var vars = query.split("&");
				for (var i=0;i<vars.length;i++) {
						var pair = vars[i].split("=");
						if(pair[0] == variable){return pair[1];}
				}
				return(false);
			}
			var presenting = window.location.search.includes('present');
			var duration = getQueryVariable('duration') || 30;
			var hasCode = !!document.querySelector('code');
			var hasAnims = !!document.querySelector('[data-animate]');
			var keyboard = {
				// pause/resume time when Enter is pressed
				13: () => {
					ElapsedTimeBar.isPaused ? ElapsedTimeBar.resume() : ElapsedTimeBar.pause();
				},
				// reset timer when 'r' is pressed
				82: () => {
					ElapsedTimeBar.reset();
				},
				77: () => {
					Reveal.configure({showNotes: !!!Reveal.getConfig().showNotes});
				}
			}
			if (presenting) {
				document.body.classList.add("presenting");
				keyboard = Object.assign(keyboard,
				{
					39: 'next',
					37: 'prev'
				});
			}
			
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: !presenting,
				showNotes: !presenting,
				progress: true,
				history: true,
				center: true,

				transition: 'none', // none/fade/slide/convex/concave/zoom
				transitionSpeed: 'fast',

				allottedTime: duration * 60 * 1000, // 30 minutes
				barColor: 'hsl(220,99%,54%)',

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: '../lib/js/classList.js', 				async: true, condition: function() { return !document.body.classList; } },
					{ src: '../plugin/markdown/marked.js', 			async: true, condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../plugin/markdown/markdown.js', 		async: true, condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../plugin/embed-tweet/embed-tweet.js', 	async: true, condition: function() { return !!document.querySelector( 'div.tweet[data-src]' ); } },
					{ src: '../lib/js/vega.min.js', 				condition: function() { return !!document.querySelector( 'div.vega-chart' ); } },
					{ src: '../lib/js/vega-embed.min.js', 			condition: function() { return !!document.querySelector( 'div.vega-chart' ); } },
					{ src: '../plugin/elapsed-time-bar/elapsed-time-bar.js', async: true, condition: function() { return presenting}},
					{ src: '../plugin/highlight/highlight.js', 		async: true, condition: function() {return hasCode},async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: '../plugin/search/search.js', 			async: true },
					{ src: '../plugin/zoom-js/zoom.js', 			async: true },
					{ src: '../plugin/notes/notes.js', 				async: true }
				],

				keyboard: keyboard
			});

			/* custom stuff */
			Reveal.addEventListener('ready', function ( event ) {
				// Set animation delay if data-delay is specified
				$('*[data-delay]').each( function () { 
					var delay = $(this).attr("data-delay");
					$(this).css("-webkit-animation-delay", delay+"s"); 
					$(this).css("animation-delay", delay+"s"); 
				});
				// Set animation duration if data-duration is specified
				$('*[data-duration]').each( function () { 
					var duration = $(this).attr("data-duration");
					$(this).css("-webkit-animation-duration", duration+"s"); 
					$(this).css("animation-duration", duration+"s"); 
				});
				// initialize vega charts
				let width = window.innerWidth / 2;
				$(".vega-chart").each(function() {
					let spec = this.attributes.getNamedItem("data-spec").value;
					//spec = "https://raw.githubusercontent.com/vega/vega/master/docs/examples/bar-chart.vg.json";
					vegaEmbed('#'+this.id, spec, {"actions": false, "theme": "dark", "width": width, "renderer": "svg", "config": "data/config.json"}).then(function(result) {
					// Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
					}).catch(console.error);
				});
				
			});

			// Animate items that are not in a fragment
				Reveal.addEventListener('slidechanged', function( event ) {
				// Animate elements that are not a fragment (or in a fragment)
				var filter = '*[data-animate]:not(.fragment):not(.fragment *)';
				
				$(event.currentSlide).find(filter).each( function () {
					$(this).addClass('animated');
					$(this).addClass($(this).attr('data-animate'));
				});		
				$(event.previousSlide).find(filter).each( function () {
					$(this).removeClass('animated');
					$(this).removeClass($(this).attr('data-animate'));
				});		
				});

				// Animate fragments
				Reveal.addEventListener('fragmentshown', function( event ) {
					function loop(i, el) { 
						if ($(el).attr('data-animate')) {
							$(el).addClass('animated');
							$(el).addClass($(el).attr('data-animate'));
						}
						$.each($(el).children().not('.fragment'), loop);
					};
					$.each(event.fragments, loop);
				});

				// Make the animation runnable again if fragment is hidden
				Reveal.addEventListener('fragmenthidden', function( event ) {	  
				function loop(i, el) { 
					if ($(el).attr('data-animate')) {
						$(el).removeClass('animated');
						$(el).removeClass($(el).attr('data-animate'));
					}
					$.each($(el).children().not('.fragment'), loop);
				};
				$.each(event.fragments, loop);
			});
			if (hasCode) {
				var l = document.createElement('link');
				l.rel="stylesheet";
				l.href = "../lib/css/zenburn.css"
				document.head.appendChild(l);
			}
			if (hasAnims) {
				var l = document.createElement('link');
				l.rel="stylesheet";
				l.href = "../lib/css/animate.min.css"
				document.head.appendChild(l);
			}
		</script>

		<script nonce="googleAnalytics">
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();
			i.initAnalytics=function(){a=s.createElement(o),m=s.getElementsByTagName(o)[0];
			a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			}})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			
			ga('create', 'UA-6512525-16', 'auto', {'siteSpeedSampleRate': 100});
			ga('send', 'pageview');
			
			window.addEventListener('load',function(){initAnalytics()});
		</script>
	</body>
</html>
