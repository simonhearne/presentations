<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>The Psychology of Speed - @SimonHearne</title>
		<base target="_blank"></base>
		<meta name="description" content="Presentation: The Psychology of Speed.">
		<meta name="author" content="Simon Hearne">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="../css/reveal.css">
		<link rel="stylesheet" href="../css/theme/simon.css" id="theme">

		<link rel="preload" as="font" type="font/woff2" crossorigin href="../lib/font/league-gothic/league-gothic.woff2">
		<link rel="preload" as="font" type="font/woff" crossorigin href="../lib/font/league-gothic/league-gothic.woff">
		<link rel="preload" as="font" type="font/woff2" crossorigin href="../lib/font/josefin-sans-v13-latin/josefin-sans-v13-latin-regular.woff2">
		<link rel="preload" as="font" type="font/woff" crossorigin href="../lib/font/josefin-sans-v13-latin/josefin-sans-v13-latin-regular.woff">

		<meta property="og:image" content="https://simonhearne.com/presentations/psych-speed/social.png" />
		<meta property="og:image:width" content=1200 />
		<meta property="og:image:height" content=600 />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:creator" content="@SimonHearne" />
		<meta name="twitter:title" content="Presentation: The Psychology of Speed.">
		<meta name="twitter:description" content="" />
		<meta name="twitter:image" content="https://simonhearne.com/presentations/psych-speed/social.png" />
		
		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '../css/print/pdf.css' : '../css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>
		<div class="reveal">
			<div class="smaller tagline">@SimonHearne</div>
			<!-- Entertain, inform, educate -->
			<div class="slides">
				<section data-state="title-slide">
					<h1>The Psychology of <span style="font-style:oblique;">Speed</span></h1>
					<p style="margin:0;">Simon Hearne</p>
					<p class="smaller" style="margin:0;">Web Performance Architect</p>
				</section>

				<section>
					<h3>We've all seen the studies...</h3>
					<table class="twocol">
						<tr>
							<td><img class="plain" data-src="media/bbc.png"/></td>
							<td>The BBC loses an additional 10% of users for every additional second it takes to load</td>
						</tr>
						<tr data-autoslide="750" class="fragment">
							<td><img class="plain" data-src="media/pinterest.png"/></td>
							<td>Pinterest improved load time by 40% and saw 15% increase in SEO traffic and 15% increase in conversions</td>
						</tr>
						<tr class="fragment">
							<td><img class="plain" data-src="media/ft.png"/></td>
							<td>The Financial times increased user engagement by 30% when they released the new, performance focused FT.com</td>
						</tr>
					</table>
					<p class="subtitle smallest bottom-right"><a href="https://wpostats.com/tags/engagement/">wpostats.com/tags/engagement/</a></p>
					<aside class="notes">
						There are also studies which show how engagement increases when speed is improved, but what is engagement, and what is speed? Unfortunately it is extremely rare for these case studies to include the things we really care about - what metric did they use to measure speed? How did they collect it, or aggregate it? The BBC loses an additional 10% of users for every second their site gets slower - what is a lost user? A bounce or a session that never happens? These are all important questions and caveats to bear in mind when viewing case studies, they are useful tools to generate interest in speed but the critical task is to perform this analysis on _your own data_.
					</aside>
				</section>

				<section>
					<section>
						<h3>Why?</h3>
					</section>
					<section data-background-image="../backgrounds/waiting.jpg">
						<h3 class="dark-bg">It's all about the wait<span class="subtitle fragment">... and we know a lot about waiting ...</span></h3>
					</section>
					<section>
						<img class="stretch" data-src="media/psych-lines.png"/>
						<p class="subtitle smallest bottom-right"><a href="http://www.columbia.edu/~ww2040/4615S13/Psychology_of_Waiting_Lines.pdf">The Psychology of Waiting Lines [PDF]</a></p>
					</section>
					<section>
						<blockquote>Waiting is frustrating, demoralizing, agonizing, aggravating, annoying, time consuming and incredibly expensive.</blockquote>
					</section>
					<section>
						<h3>Six rules for waiting times</h3>
						<ol>
							<li data-autoslide="500" class="fragment">Unoccupied time feels longer than occupied time</li>
							<li data-autoslide="500" class="fragment">People want to get started</li>
							<li data-autoslide="500" class="fragment">Anxiety makes waits seem longer</li>
							<li data-autoslide="500" class="fragment">Uncertain waits feel longer than known waits</li>
							<li data-autoslide="500" class="fragment">Unexplained waits feel longer than explained waits</li>
							<li class="fragment">People will wait longer for more valuable services</li>
						</ol>
					</section>
				</section>
				
				<section>
					<section class="pull-up" data-background-image="media/elevator1.jpg">
						<h3 class="dark-bg">1 - Occupying Time</h3>
						<p class="bottom-right smallest"><a href="https://signalvnoise.com/posts/1244-defining-the-problem-of-elevator-waiting-times">Defining the Problem of Elevator Waiting Times</a></p>
					</section>
					<section>
						<h3>Occupying time on the web</h3>
						<ul>
							<li class="fragment">Show something, fast</li>
							<li class="fragment">Make it fun!</li>
						</ul>
					</section>
					<section>
						<h3>Fill UX gaps<h3>
						<img class="fragment stretch" data-src="media/slack1.jpg"/>
					</section>
					<section>
						<h3>Learn from Games?</h3>
						<img class="stretch" data-src="media/loadingscreen.png"/>
						<p class="bottom-right smallest"><a href="https://www.eff.org/deeplinks/2015/12/loading-screen-game-patent-finally-expires">Loading screen patent finally expires.</a></p>
					</section>
					<section>
						<h3>Fill UX gaps<h3>
						<button onclick="dinoload()" id="dino-btn">Dino?</button>
						<div id="main-frame-error" class="interstitial-wrapper"><div id="main-content"><div class="icon icon-offline"></div></div></div>
						<script>function dinoload(){new Runner(".interstitial-wrapper");document.getElementById("dino-btn").style.cssText="display:none;visibility:hidden;"}!function(){"use strict";function t(s,e){if(t.instance_)return t.instance_;t.instance_=this,this.outerContainerEl=document.querySelector(s),this.containerEl=null,this.snackbarEl=null,this.detailsButton=this.outerContainerEl.querySelector("#details-button"),this.config=e||t.config,this.dimensions=t.defaultDimensions,this.canvas=null,this.canvasCtx=null,this.tRex=null,this.distanceMeter=null,this.distanceRan=0,this.highestScore=0,this.time=0,this.runningTime=0,this.msPerFrame=1e3/i,this.currentSpeed=this.config.SPEED,this.obstacles=[],this.activated=!1,this.playing=!1,this.crashed=!1,this.paused=!1,this.inverted=!1,this.invertTimer=0,this.resizeTimerId_=null,this.playCount=0,this.audioBuffer=null,this.soundFx={},this.audioContext=null,this.images={},this.imagesLoaded=0,this.isDisabled()?this.setupDisabledRunner():this.loadImages()}window.Runner=t;var i=60,s=window.devicePixelRatio>1,e=/iPad|iPhone|iPod/.test(window.navigator.platform),n=/Android/.test(window.navigator.userAgent)||e;function h(t,i){return Math.floor(Math.random()*(i-t+1))+t}function o(){return e?(new Date).getTime():performance.now()}function a(t,i,s,e){this.canvas=t,this.canvasCtx=t.getContext("2d"),this.canvasDimensions=e,this.textImgPos=i,this.restartImgPos=s,this.draw()}function r(t,i){return new u(t.x+i.x,t.y+i.y,t.width,t.height)}function c(t,i,s){t.save(),t.strokeStyle="#f00",t.strokeRect(i.x,i.y,i.width,i.height),t.strokeStyle="#0f0",t.strokeRect(s.x,s.y,s.width,s.height),t.restore()}function d(t,i){var s=!1,e=(t.x,t.y,i.x);i.y;return t.x<e+i.width&&t.x+t.width>e&&t.y<i.y+i.height&&t.height+t.y>i.y&&(s=!0),s}function u(t,i,s,e){this.x=t,this.y=i,this.width=s,this.height=e}function l(t,i,s,e,n,o,a){this.canvasCtx=t,this.spritePos=s,this.typeConfig=i,this.gapCoefficient=n,this.size=h(1,l.MAX_OBSTACLE_LENGTH),this.dimensions=e,this.remove=!1,this.xPos=e.WIDTH+(a||0),this.yPos=0,this.width=0,this.collisionBoxes=[],this.gap=0,this.speedOffset=0,this.currentFrame=0,this.timer=0,this.init(o)}function m(t,s){this.canvas=t,this.canvasCtx=t.getContext("2d"),this.spritePos=s,this.xPos=0,this.yPos=0,this.groundYPos=0,this.currentFrame=0,this.currentAnimFrames=[],this.blinkDelay=0,this.blinkCount=0,this.animStartTime=0,this.timer=0,this.msPerFrame=1e3/i,this.config=m.config,this.status=m.status.WAITING,this.jumping=!1,this.ducking=!1,this.jumpVelocity=0,this.reachedMinHeight=!1,this.speedDrop=!1,this.jumpCount=0,this.jumpspotX=0,this.init()}function T(i,s,e){this.canvas=i,this.canvasCtx=i.getContext("2d"),this.image=t.imageSprite,this.spritePos=s,this.x=0,this.y=5,this.currentDistance=0,this.maxScore=0,this.highScore=0,this.container=null,this.digits=[],this.acheivement=!1,this.defaultString="",this.flashTimer=0,this.flashIterations=0,this.invertTrigger=!1,this.config=T.config,this.maxScoreUnits=this.config.MAX_DISTANCE_UNITS,this.init(e)}function p(t,i,s){this.canvas=t,this.canvasCtx=this.canvas.getContext("2d"),this.spritePos=i,this.containerWidth=s,this.xPos=s,this.yPos=0,this.remove=!1,this.cloudGap=h(p.config.MIN_CLOUD_GAP,p.config.MAX_CLOUD_GAP),this.init()}function f(t,i,s){this.spritePos=i,this.canvas=t,this.canvasCtx=t.getContext("2d"),this.xPos=s-50,this.yPos=30,this.currentPhase=0,this.opacity=0,this.containerWidth=s,this.stars=[],this.drawStars=!1,this.placeStars()}function g(t,i){this.spritePos=i,this.canvas=t,this.canvasCtx=t.getContext("2d"),this.sourceDimensions={},this.dimensions=g.dimensions,this.sourceXPos=[this.spritePos.x,this.spritePos.x+this.dimensions.WIDTH],this.xPos=[],this.yPos=0,this.bumpThreshold=.5,this.setSourceDimensions(),this.draw()}function E(t,i,s,e){this.canvas=t,this.canvasCtx=this.canvas.getContext("2d"),this.config=E.config,this.dimensions=s,this.gapCoefficient=e,this.obstacles=[],this.obstacleHistory=[],this.horizonOffsets=[0,0],this.cloudFrequency=this.config.CLOUD_FREQUENCY,this.spritePos=i,this.nightMode=null,this.clouds=[],this.cloudSpeed=this.config.BG_CLOUD_SPEED,this.horizonLine=null,this.init()}t.config={ACCELERATION:.001,BG_CLOUD_SPEED:.2,BOTTOM_PAD:10,CLEAR_TIME:3e3,CLOUD_FREQUENCY:.5,GAMEOVER_CLEAR_TIME:750,GAP_COEFFICIENT:.6,GRAVITY:.6,INITIAL_JUMP_VELOCITY:12,INVERT_FADE_DURATION:12e3,INVERT_DISTANCE:700,MAX_BLINK_COUNT:3,MAX_CLOUDS:6,MAX_OBSTACLE_LENGTH:3,MAX_OBSTACLE_DUPLICATION:2,MAX_SPEED:13,MIN_JUMP_HEIGHT:35,MOBILE_SPEED_COEFFICIENT:1.2,RESOURCE_TEMPLATE_ID:"audio-resources",SPEED:6,SPEED_DROP_COEFFICIENT:3},t.defaultDimensions={WIDTH:600,HEIGHT:150},t.classes={CANVAS:"runner-canvas",CONTAINER:"runner-container",CRASHED:"crashed",ICON:"icon-offline",INVERTED:"inverted",SNACKBAR:"snackbar",SNACKBAR_SHOW:"snackbar-show",TOUCH_CONTROLLER:"controller"},t.spriteDefinition={LDPI:{CACTUS_LARGE:{x:332,y:2},CACTUS_SMALL:{x:228,y:2},CLOUD:{x:86,y:2},HORIZON:{x:2,y:54},MOON:{x:484,y:2},PTERODACTYL:{x:134,y:2},RESTART:{x:2,y:2},TEXT_SPRITE:{x:655,y:2},TREX:{x:848,y:2},STAR:{x:645,y:2}},HDPI:{CACTUS_LARGE:{x:652,y:2},CACTUS_SMALL:{x:446,y:2},CLOUD:{x:166,y:2},HORIZON:{x:2,y:104},MOON:{x:954,y:2},PTERODACTYL:{x:260,y:2},RESTART:{x:2,y:2},TEXT_SPRITE:{x:1294,y:2},TREX:{x:1678,y:2},STAR:{x:1276,y:2}}},t.sounds={BUTTON_PRESS:"offline-sound-press",HIT:"offline-sound-hit",SCORE:"offline-sound-reached"},t.keycodes={JUMP:{38:1,32:1,81:1},DUCK:{40:1},RESTART:{13:1}},t.events={ANIM_END:"webkitAnimationEnd",CLICK:"click",KEYDOWN:"keydown",KEYUP:"keyup",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",RESIZE:"resize",TOUCHEND:"touchend",TOUCHSTART:"touchstart",VISIBILITY:"visibilitychange",BLUR:"blur",FOCUS:"focus",LOAD:"load"},t.prototype={isDisabled:function(){return!1},setupDisabledRunner:function(){this.containerEl=document.createElement("div"),this.containerEl.className=t.classes.SNACKBAR,this.containerEl.textContent=loadTimeData.getValue("disabledEasterEgg"),this.outerContainerEl.appendChild(this.containerEl),document.addEventListener(t.events.KEYDOWN,function(i){t.keycodes.JUMP[i.keyCode]&&(this.containerEl.classList.add(t.classes.SNACKBAR_SHOW),document.querySelector(".icon").classList.add("icon-disabled"))}.bind(this))},updateConfigSetting:function(t,i){if(t in this.config&&null!=i)switch(this.config[t]=i,t){case"GRAVITY":case"MIN_JUMP_HEIGHT":case"SPEED_DROP_COEFFICIENT":this.tRex.config[t]=i;break;case"INITIAL_JUMP_VELOCITY":this.tRex.setJumpVelocity(i);break;case"SPEED":this.setSpeed(i)}},loadImages:function(){s?(t.imageSprite=document.getElementById("offline-resources-2x"),this.spriteDef=t.spriteDefinition.HDPI):(t.imageSprite=document.getElementById("offline-resources-1x"),this.spriteDef=t.spriteDefinition.LDPI),t.imageSprite.complete?this.init():t.imageSprite.addEventListener(t.events.LOAD,this.init.bind(this))},loadSounds:function(){if(!e){this.audioContext=new AudioContext;document.getElementById(this.config.RESOURCE_TEMPLATE_ID).content;for(var i in t.sounds){var s=document.getElementById(t.sounds[i]);this.soundFx[i]=s}}},setSpeed:function(t){var i=t||this.currentSpeed;if(this.dimensions.WIDTH<600){var s=i*this.dimensions.WIDTH/600*this.config.MOBILE_SPEED_COEFFICIENT;this.currentSpeed=s>i?i:s}else t&&(this.currentSpeed=t)},init:function(){var i,s,e,h,o;document.querySelector("."+t.classes.ICON).style.visibility="hidden",this.adjustDimensions(),this.setSpeed(),this.containerEl=document.createElement("div"),this.containerEl.className=t.classes.CONTAINER,this.canvas=(i=this.containerEl,s=this.dimensions.WIDTH,e=this.dimensions.HEIGHT,h=t.classes.PLAYER,(o=document.createElement("canvas")).className=h?t.classes.CANVAS+" "+h:t.classes.CANVAS,o.width=s,o.height=e,i.appendChild(o),o),this.canvasCtx=this.canvas.getContext("2d"),this.canvasCtx.fillStyle="#f7f7f7",this.canvasCtx.fill(),t.updateCanvasScaling(this.canvas),this.horizon=new E(this.canvas,this.spriteDef,this.dimensions,this.config.GAP_COEFFICIENT),this.distanceMeter=new T(this.canvas,this.spriteDef.TEXT_SPRITE,this.dimensions.WIDTH),this.tRex=new m(this.canvas,this.spriteDef.TREX),this.outerContainerEl.appendChild(this.containerEl),n&&this.createTouchController(),this.startListening(),this.update(),window.addEventListener(t.events.RESIZE,this.debounceResize.bind(this))},createTouchController:function(){this.touchController=document.createElement("div"),this.touchController.className=t.classes.TOUCH_CONTROLLER,this.outerContainerEl.appendChild(this.touchController)},debounceResize:function(){this.resizeTimerId_||(this.resizeTimerId_=setInterval(this.adjustDimensions.bind(this),250))},adjustDimensions:function(){clearInterval(this.resizeTimerId_),this.resizeTimerId_=null;var i=window.getComputedStyle(this.outerContainerEl),s=Number(i.paddingLeft.substr(0,i.paddingLeft.length-2));this.dimensions.WIDTH=this.outerContainerEl.offsetWidth-2*s,this.canvas&&(this.canvas.width=this.dimensions.WIDTH,this.canvas.height=this.dimensions.HEIGHT,t.updateCanvasScaling(this.canvas),this.distanceMeter.calcXPos(this.dimensions.WIDTH),this.clearCanvas(),this.horizon.update(0,0,!0),this.tRex.update(0),this.playing||this.crashed||this.paused?(this.containerEl.style.width=this.dimensions.WIDTH+"px",this.containerEl.style.height=this.dimensions.HEIGHT+"px",this.distanceMeter.update(0,Math.ceil(this.distanceRan)),this.stop()):this.tRex.draw(0,0),this.crashed&&this.gameOverPanel&&(this.gameOverPanel.updateDimensions(this.dimensions.WIDTH),this.gameOverPanel.draw()))},playIntro:function(){if(this.activated||this.crashed)this.crashed&&this.restart();else{this.playingIntro=!0,this.tRex.playingIntro=!0;var i="@-webkit-keyframes intro { from { width:"+m.config.WIDTH+"px }to { width: "+this.dimensions.WIDTH+"px }}",s=document.createElement("style");s.innerHTML=i,document.head.appendChild(s),this.containerEl.addEventListener(t.events.ANIM_END,this.startGame.bind(this)),this.containerEl.style.webkitAnimation="intro .4s ease-out 1 both",this.containerEl.style.width=this.dimensions.WIDTH+"px",this.playing=!0,this.activated=!0}},startGame:function(){this.runningTime=0,this.playingIntro=!1,this.tRex.playingIntro=!1,this.containerEl.style.webkitAnimation="",this.playCount++,document.addEventListener(t.events.VISIBILITY,this.onVisibilityChange.bind(this)),window.addEventListener(t.events.BLUR,this.onVisibilityChange.bind(this)),window.addEventListener(t.events.FOCUS,this.onVisibilityChange.bind(this))},clearCanvas:function(){this.canvasCtx.clearRect(0,0,this.dimensions.WIDTH,this.dimensions.HEIGHT)},update:function(){this.updatePending=!1;var i=o(),s=i-(this.time||i);if(this.time=i,this.playing){this.clearCanvas(),this.tRex.jumping&&this.tRex.updateJump(s),this.runningTime+=s;var e=this.runningTime>this.config.CLEAR_TIME;if(1!=this.tRex.jumpCount||this.playingIntro||this.playIntro(),this.playingIntro?this.horizon.update(0,this.currentSpeed,e):(s=this.activated?s:0,this.horizon.update(s,this.currentSpeed,e,this.inverted)),e&&function(i,s,e){t.defaultDimensions.WIDTH,i.xPos;var n=new u(s.xPos+1,s.yPos+1,s.config.WIDTH-2,s.config.HEIGHT-2),h=new u(i.xPos+1,i.yPos+1,i.typeConfig.width*i.size-2,i.typeConfig.height-2);e&&c(e,n,h);if(d(n,h))for(var o=i.collisionBoxes,a=s.ducking?m.collisionBoxes.DUCKING:m.collisionBoxes.RUNNING,l=0;l<a.length;l++)for(var T=0;T<o.length;T++){var p=r(a[l],n),f=r(o[T],h),g=d(p,f);if(e&&c(e,p,f),g)return[p,f]}return!1}(this.horizon.obstacles[0],this.tRex)?this.gameOver():(this.distanceRan+=this.currentSpeed*s/this.msPerFrame,this.currentSpeed<this.config.MAX_SPEED&&(this.currentSpeed+=this.config.ACCELERATION)),this.distanceMeter.update(s,Math.ceil(this.distanceRan))&&this.playSound(this.soundFx.SCORE),this.invertTimer>this.config.INVERT_FADE_DURATION)this.invertTimer=0,this.invertTrigger=!1,this.invert();else if(this.invertTimer)this.invertTimer+=s;else{var n=this.distanceMeter.getActualDistance(Math.ceil(this.distanceRan));n>0&&(this.invertTrigger=!(n%this.config.INVERT_DISTANCE),this.invertTrigger&&0===this.invertTimer&&(this.invertTimer+=s,this.invert()))}}(this.playing||!this.activated&&this.tRex.blinkCount<t.config.MAX_BLINK_COUNT)&&(this.tRex.update(s),this.scheduleNextUpdate())},handleEvent:function(i){return function(t,s){switch(t){case s.KEYDOWN:case s.TOUCHSTART:case s.MOUSEDOWN:this.onKeyDown(i);break;case s.KEYUP:case s.TOUCHEND:case s.MOUSEUP:this.onKeyUp(i)}}.bind(this)(i.type,t.events)},startListening:function(){document.addEventListener(t.events.KEYDOWN,this),document.addEventListener(t.events.KEYUP,this),n?(this.touchController.addEventListener(t.events.TOUCHSTART,this),this.touchController.addEventListener(t.events.TOUCHEND,this),this.containerEl.addEventListener(t.events.TOUCHSTART,this)):(document.addEventListener(t.events.MOUSEDOWN,this),document.addEventListener(t.events.MOUSEUP,this))},stopListening:function(){document.removeEventListener(t.events.KEYDOWN,this),document.removeEventListener(t.events.KEYUP,this),n?(this.touchController.removeEventListener(t.events.TOUCHSTART,this),this.touchController.removeEventListener(t.events.TOUCHEND,this),this.containerEl.removeEventListener(t.events.TOUCHSTART,this)):(document.removeEventListener(t.events.MOUSEDOWN,this),document.removeEventListener(t.events.MOUSEUP,this))},onKeyDown:function(i){n&&this.playing&&i.preventDefault(),i.target!=this.detailsButton&&(this.crashed||!t.keycodes.JUMP[i.keyCode]&&i.type!=t.events.TOUCHSTART||(this.playing||(this.loadSounds(),this.playing=!0,this.update(),window.errorPageController&&errorPageController.trackEasterEgg()),this.tRex.jumping||this.tRex.ducking||(this.playSound(this.soundFx.BUTTON_PRESS),this.tRex.startJump(this.currentSpeed),freshEnter&&dinoAI())),this.crashed&&i.type==t.events.TOUCHSTART&&i.currentTarget==this.containerEl&&this.restart()),this.playing&&!this.crashed&&t.keycodes.DUCK[i.keyCode]&&(i.preventDefault(),this.tRex.jumping?this.tRex.setSpeedDrop():this.tRex.jumping||this.tRex.ducking||this.tRex.setDuck(!0))},onKeyUp:function(i){var s=String(i.keyCode),e=t.keycodes.JUMP[s]||i.type==t.events.TOUCHEND||i.type==t.events.MOUSEDOWN;if(this.isRunning()&&e)this.tRex.endJump();else if(t.keycodes.DUCK[s])this.tRex.speedDrop=!1,this.tRex.setDuck(!1);else if(this.crashed){var n=o()-this.time;(t.keycodes.RESTART[s]||this.isLeftClickOnCanvas(i)||n>=this.config.GAMEOVER_CLEAR_TIME&&t.keycodes.JUMP[s])&&this.restart()}else this.paused&&e&&(this.tRex.reset(),this.play())},isLeftClickOnCanvas:function(i){return null!=i.button&&i.button<2&&i.type==t.events.MOUSEUP&&i.target==this.canvas},scheduleNextUpdate:function(){this.updatePending||(this.updatePending=!0,this.raqId=requestAnimationFrame(this.update.bind(this)))},isRunning:function(){return!!this.raqId},gameOver:function(){var t;this.playSound(this.soundFx.HIT),t=200,n&&window.navigator.vibrate&&window.navigator.vibrate(t),this.stop(),this.crashed=!0,this.distanceMeter.acheivement=!1,this.tRex.update(100,m.status.CRASHED),this.gameOverPanel?this.gameOverPanel.draw():this.gameOverPanel=new a(this.canvas,this.spriteDef.TEXT_SPRITE,this.spriteDef.RESTART,this.dimensions),this.distanceRan>this.highestScore&&(this.highestScore=Math.ceil(this.distanceRan),this.distanceMeter.setHighScore(this.highestScore)),this.time=o()},stop:function(){this.playing=!1,this.paused=!0,cancelAnimationFrame(this.raqId),this.raqId=0},play:function(){this.crashed||(this.playing=!0,this.paused=!1,this.tRex.update(0,m.status.RUNNING),this.time=o(),this.update())},restart:function(){this.raqId||(this.playCount++,this.runningTime=0,this.playing=!0,this.crashed=!1,this.distanceRan=0,this.setSpeed(this.config.SPEED),this.time=o(),this.containerEl.classList.remove(t.classes.CRASHED),this.clearCanvas(),this.distanceMeter.reset(this.highestScore),this.horizon.reset(),this.tRex.reset(),this.playSound(this.soundFx.BUTTON_PRESS),this.invert(!0),this.update())},onVisibilityChange:function(t){document.hidden||document.webkitHidden||"blur"==t.type||"visible"!=document.visibilityState?this.stop():this.crashed||(this.tRex.reset(),this.play())},playSound:function(t){t&&t.play()},invert:function(i){i?(document.body.classList.toggle(t.classes.INVERTED,!1),this.invertTimer=0,this.inverted=!1):this.inverted=document.body.classList.toggle(t.classes.INVERTED,this.invertTrigger)}},t.updateCanvasScaling=function(t,i,s){var e=t.getContext("2d"),n=Math.floor(window.devicePixelRatio)||1,h=Math.floor(e.webkitBackingStorePixelRatio)||1,o=n/h;if(n!==h){var a=i||t.width,r=s||t.height;return t.width=a*o,t.height=r*o,t.style.width=a+"px",t.style.height=r+"px",e.scale(o,o),!0}return 1==n&&(t.style.width=t.width+"px",t.style.height=t.height+"px"),!1},a.dimensions={TEXT_X:0,TEXT_Y:13,TEXT_WIDTH:191,TEXT_HEIGHT:11,RESTART_WIDTH:36,RESTART_HEIGHT:32},a.prototype={updateDimensions:function(t,i){this.canvasDimensions.WIDTH=t,i&&(this.canvasDimensions.HEIGHT=i)},draw:function(){var i=a.dimensions,e=this.canvasDimensions.WIDTH/2,n=i.TEXT_X,h=i.TEXT_Y,o=i.TEXT_WIDTH,r=i.TEXT_HEIGHT,c=Math.round(e-i.TEXT_WIDTH/2),d=Math.round((this.canvasDimensions.HEIGHT-25)/3),u=i.TEXT_WIDTH,l=i.TEXT_HEIGHT,m=i.RESTART_WIDTH,T=i.RESTART_HEIGHT,p=e-i.RESTART_WIDTH/2,f=this.canvasDimensions.HEIGHT/2;s&&(h*=2,n*=2,o*=2,r*=2,m*=2,T*=2),n+=this.textImgPos.x,h+=this.textImgPos.y,this.canvasCtx.drawImage(t.imageSprite,n,h,o,r,c,d,u,l),this.canvasCtx.drawImage(t.imageSprite,this.restartImgPos.x,this.restartImgPos.y,m,T,p,f,i.RESTART_WIDTH,i.RESTART_HEIGHT)}},l.MAX_GAP_COEFFICIENT=1.5,l.MAX_OBSTACLE_LENGTH=3,l.prototype={init:function(t){if(this.cloneCollisionBoxes(),this.size>1&&this.typeConfig.multipleSpeed>t&&(this.size=1),this.width=this.typeConfig.width*this.size,Array.isArray(this.typeConfig.yPos)){var i=n?this.typeConfig.yPosMobile:this.typeConfig.yPos;this.yPos=i[h(0,i.length-1)]}else this.yPos=this.typeConfig.yPos;this.draw(),this.size>1&&(this.collisionBoxes[1].width=this.width-this.collisionBoxes[0].width-this.collisionBoxes[2].width,this.collisionBoxes[2].x=this.width-this.collisionBoxes[2].width),this.typeConfig.speedOffset&&(this.speedOffset=Math.random()>.5?this.typeConfig.speedOffset:-this.typeConfig.speedOffset),this.gap=this.getGap(this.gapCoefficient,t)},draw:function(){var i=this.typeConfig.width,e=this.typeConfig.height;s&&(i*=2,e*=2);var n=i*this.size*(.5*(this.size-1))+this.spritePos.x;this.currentFrame>0&&(n+=i*this.currentFrame),this.canvasCtx.drawImage(t.imageSprite,n,this.spritePos.y,i*this.size,e,this.xPos,this.yPos,this.typeConfig.width*this.size,this.typeConfig.height)},update:function(t,s){this.remove||(this.typeConfig.speedOffset&&(s+=this.speedOffset),this.xPos-=Math.floor(s*i/1e3*t),this.typeConfig.numFrames&&(this.timer+=t,this.timer>=this.typeConfig.frameRate&&(this.currentFrame=this.currentFrame==this.typeConfig.numFrames-1?0:this.currentFrame+1,this.timer=0)),this.draw(),this.isVisible()||(this.remove=!0))},getGap:function(t,i){var s=Math.round(this.width*i+this.typeConfig.minGap*t);return h(s,Math.round(s*l.MAX_GAP_COEFFICIENT))},isVisible:function(){return this.xPos+this.width>0},cloneCollisionBoxes:function(){for(var t=this.typeConfig.collisionBoxes,i=t.length-1;i>=0;i--)this.collisionBoxes[i]=new u(t[i].x,t[i].y,t[i].width,t[i].height)}},l.types=[{type:"CACTUS_SMALL",width:17,height:35,yPos:105,multipleSpeed:4,minGap:120,minSpeed:0,collisionBoxes:[new u(0,7,5,27),new u(4,0,6,34),new u(10,4,7,14)]},{type:"CACTUS_LARGE",width:25,height:50,yPos:90,multipleSpeed:7,minGap:120,minSpeed:0,collisionBoxes:[new u(0,12,7,38),new u(8,0,7,49),new u(13,10,10,38)]},{type:"PTERODACTYL",width:46,height:40,yPos:[100,75,50],yPosMobile:[100,50],multipleSpeed:999,minSpeed:8.5,minGap:150,collisionBoxes:[new u(15,15,16,5),new u(18,21,24,6),new u(2,14,4,3),new u(6,10,4,7),new u(10,8,6,9)],numFrames:2,frameRate:1e3/6,speedOffset:.8}],m.config={DROP_VELOCITY:-5,GRAVITY:.6,HEIGHT:47,HEIGHT_DUCK:25,INIITAL_JUMP_VELOCITY:-10,INTRO_DURATION:1500,MAX_JUMP_HEIGHT:30,MIN_JUMP_HEIGHT:30,SPEED_DROP_COEFFICIENT:3,SPRITE_WIDTH:262,START_X_POS:50,WIDTH:44,WIDTH_DUCK:59},m.collisionBoxes={DUCKING:[new u(1,18,55,25)],RUNNING:[new u(22,0,17,16),new u(1,18,30,9),new u(10,35,14,8),new u(1,24,29,5),new u(5,30,21,4),new u(9,34,15,4)]},m.status={CRASHED:"CRASHED",DUCKING:"DUCKING",JUMPING:"JUMPING",RUNNING:"RUNNING",WAITING:"WAITING"},m.BLINK_TIMING=7e3,m.animFrames={WAITING:{frames:[44,0],msPerFrame:1e3/3},RUNNING:{frames:[88,132],msPerFrame:1e3/12},CRASHED:{frames:[220],msPerFrame:1e3/60},JUMPING:{frames:[0],msPerFrame:1e3/60},DUCKING:{frames:[264,323],msPerFrame:125}},m.prototype={init:function(){this.groundYPos=t.defaultDimensions.HEIGHT-this.config.HEIGHT-t.config.BOTTOM_PAD,this.yPos=this.groundYPos,this.minJumpHeight=this.groundYPos-this.config.MIN_JUMP_HEIGHT,this.draw(0,0),this.update(0,m.status.WAITING)},setJumpVelocity:function(t){this.config.INIITAL_JUMP_VELOCITY=-t,this.config.DROP_VELOCITY=-t/2},update:function(t,i){this.timer+=t,i&&(this.status=i,this.currentFrame=0,this.msPerFrame=m.animFrames[i].msPerFrame,this.currentAnimFrames=m.animFrames[i].frames,i==m.status.WAITING&&(this.animStartTime=o(),this.setBlinkDelay())),this.playingIntro&&this.xPos<this.config.START_X_POS&&(this.xPos+=Math.round(this.config.START_X_POS/this.config.INTRO_DURATION*t)),this.status==m.status.WAITING?this.blink(o()):this.draw(this.currentAnimFrames[this.currentFrame],0),this.timer>=this.msPerFrame&&(this.currentFrame=this.currentFrame==this.currentAnimFrames.length-1?0:this.currentFrame+1,this.timer=0),this.speedDrop&&this.yPos==this.groundYPos&&(this.speedDrop=!1,this.setDuck(!0))},draw:function(i,e){var n=i,h=e,o=this.ducking&&this.status!=m.status.CRASHED?this.config.WIDTH_DUCK:this.config.WIDTH,a=this.config.HEIGHT;s&&(n*=2,h*=2,o*=2,a*=2),n+=this.spritePos.x,h+=this.spritePos.y,this.ducking&&this.status!=m.status.CRASHED?this.canvasCtx.drawImage(t.imageSprite,n,h,o,a,this.xPos,this.yPos,this.config.WIDTH_DUCK,this.config.HEIGHT):(this.ducking&&this.status==m.status.CRASHED&&this.xPos++,this.canvasCtx.drawImage(t.imageSprite,n,h,o,a,this.xPos,this.yPos,this.config.WIDTH,this.config.HEIGHT))},setBlinkDelay:function(){this.blinkDelay=Math.ceil(Math.random()*m.BLINK_TIMING)},blink:function(t){t-this.animStartTime>=this.blinkDelay&&(this.draw(this.currentAnimFrames[this.currentFrame],0),1==this.currentFrame&&(this.setBlinkDelay(),this.animStartTime=t,this.blinkCount++))},startJump:function(t){this.jumping||(this.update(0,m.status.JUMPING),this.jumpVelocity=this.config.INIITAL_JUMP_VELOCITY-t/10,this.jumping=!0,this.reachedMinHeight=!1,this.speedDrop=!1)},endJump:function(){this.reachedMinHeight&&this.jumpVelocity<this.config.DROP_VELOCITY&&(this.jumpVelocity=this.config.DROP_VELOCITY)},updateJump:function(t,i){var s=t/m.animFrames[this.status].msPerFrame;this.speedDrop?this.yPos+=Math.round(this.jumpVelocity*this.config.SPEED_DROP_COEFFICIENT*s):this.yPos+=Math.round(this.jumpVelocity*s),this.jumpVelocity+=this.config.GRAVITY*s,(this.yPos<this.minJumpHeight||this.speedDrop)&&(this.reachedMinHeight=!0),(this.yPos<this.config.MAX_JUMP_HEIGHT||this.speedDrop)&&this.endJump(),this.yPos>this.groundYPos&&(this.reset(),this.jumpCount++),this.update(t)},setSpeedDrop:function(){this.speedDrop=!0,this.jumpVelocity=1},setDuck:function(t){t&&this.status!=m.status.DUCKING?(this.update(0,m.status.DUCKING),this.ducking=!0):this.status==m.status.DUCKING&&(this.update(0,m.status.RUNNING),this.ducking=!1)},reset:function(){this.yPos=this.groundYPos,this.jumpVelocity=0,this.jumping=!1,this.ducking=!1,this.update(0,m.status.RUNNING),this.midair=!1,this.speedDrop=!1,this.jumpCount=0}},T.dimensions={WIDTH:10,HEIGHT:13,DEST_WIDTH:11},T.yPos=[0,13,27,40,53,67,80,93,107,120],T.config={MAX_DISTANCE_UNITS:5,ACHIEVEMENT_DISTANCE:100,COEFFICIENT:.025,FLASH_DURATION:250,FLASH_ITERATIONS:3},T.prototype={init:function(t){var i="";this.calcXPos(t),this.maxScore=this.maxScoreUnits;for(var s=0;s<this.maxScoreUnits;s++)this.draw(s,0),this.defaultString+="0",i+="9";this.maxScore=parseInt(i)},calcXPos:function(t){this.x=t-T.dimensions.DEST_WIDTH*(this.maxScoreUnits+1)},draw:function(t,i,e){var n=T.dimensions.WIDTH,h=T.dimensions.HEIGHT,o=T.dimensions.WIDTH*i,a=0,r=t*T.dimensions.DEST_WIDTH,c=this.y,d=T.dimensions.WIDTH,u=T.dimensions.HEIGHT;if(s&&(n*=2,h*=2,o*=2),o+=this.spritePos.x,a+=this.spritePos.y,this.canvasCtx.save(),e){var l=this.x-2*this.maxScoreUnits*T.dimensions.WIDTH;this.canvasCtx.translate(l,this.y)}else this.canvasCtx.translate(this.x,this.y);this.canvasCtx.drawImage(this.image,o,a,n,h,r,c,d,u),this.canvasCtx.restore()},getActualDistance:function(t){return t?Math.round(t*this.config.COEFFICIENT):0},update:function(t,i){var s=!0,e=!1;if(this.acheivement)this.flashIterations<=this.config.FLASH_ITERATIONS?(this.flashTimer+=t,this.flashTimer<this.config.FLASH_DURATION?s=!1:this.flashTimer>2*this.config.FLASH_DURATION&&(this.flashTimer=0,this.flashIterations++)):(this.acheivement=!1,this.flashIterations=0,this.flashTimer=0);else if((i=this.getActualDistance(i))>this.maxScore&&this.maxScoreUnits==this.config.MAX_DISTANCE_UNITS?(this.maxScoreUnits++,this.maxScore=parseInt(this.maxScore+"9")):this.distance=0,i>0){i%this.config.ACHIEVEMENT_DISTANCE==0&&(this.acheivement=!0,this.flashTimer=0,e=!0);var n=(this.defaultString+i).substr(-this.maxScoreUnits);this.digits=n.split("")}else this.digits=this.defaultString.split("");if(s)for(var h=this.digits.length-1;h>=0;h--)this.draw(h,parseInt(this.digits[h]));return this.drawHighScore(),e},drawHighScore:function(){this.canvasCtx.save(),this.canvasCtx.globalAlpha=.8;for(var t=this.highScore.length-1;t>=0;t--)this.draw(t,parseInt(this.highScore[t],10),!0);this.canvasCtx.restore()},setHighScore:function(t){t=this.getActualDistance(t);var i=(this.defaultString+t).substr(-this.maxScoreUnits);this.highScore=["10","11",""].concat(i.split(""))},reset:function(){this.update(0),this.acheivement=!1}},p.config={HEIGHT:14,MAX_CLOUD_GAP:400,MAX_SKY_LEVEL:30,MIN_CLOUD_GAP:100,MIN_SKY_LEVEL:71,WIDTH:46},p.prototype={init:function(){this.yPos=h(p.config.MAX_SKY_LEVEL,p.config.MIN_SKY_LEVEL),this.draw()},draw:function(){this.canvasCtx.save();var i=p.config.WIDTH,e=p.config.HEIGHT;s&&(i*=2,e*=2),this.canvasCtx.drawImage(t.imageSprite,this.spritePos.x,this.spritePos.y,i,e,this.xPos,this.yPos,p.config.WIDTH,p.config.HEIGHT),this.canvasCtx.restore()},update:function(t){this.remove||(this.xPos-=Math.ceil(t),this.draw(),this.isVisible()||(this.remove=!0))},isVisible:function(){return this.xPos+p.config.WIDTH>0}},f.config={FADE_SPEED:.035,HEIGHT:40,MOON_SPEED:.25,NUM_STARS:2,STAR_SIZE:9,STAR_SPEED:.3,STAR_MAX_Y:70,WIDTH:20},f.phases=[140,120,100,60,40,20,0],f.prototype={update:function(t,i){if(t&&0==this.opacity&&(this.currentPhase++,this.currentPhase>=f.phases.length&&(this.currentPhase=0)),t&&(this.opacity<1||0==this.opacity)?this.opacity+=f.config.FADE_SPEED:this.opacity>0&&(this.opacity-=f.config.FADE_SPEED),this.opacity>0){if(this.xPos=this.updateXPos(this.xPos,f.config.MOON_SPEED),this.drawStars)for(var s=0;s<f.config.NUM_STARS;s++)this.stars[s].x=this.updateXPos(this.stars[s].x,f.config.STAR_SPEED);this.draw()}else this.opacity=0,this.placeStars();this.drawStars=!0},updateXPos:function(t,i){return t<-f.config.WIDTH?t=this.containerWidth:t-=i,t},draw:function(){var i=3==this.currentPhase?2*f.config.WIDTH:f.config.WIDTH,e=f.config.HEIGHT,n=this.spritePos.x+f.phases[this.currentPhase],h=i,o=f.config.STAR_SIZE,a=t.spriteDefinition.LDPI.STAR.x;if(s&&(i*=2,e*=2,n=this.spritePos.x+2*f.phases[this.currentPhase],o*=2,a=t.spriteDefinition.HDPI.STAR.x),this.canvasCtx.save(),this.canvasCtx.globalAlpha=this.opacity,this.drawStars)for(var r=0;r<f.config.NUM_STARS;r++)this.canvasCtx.drawImage(t.imageSprite,a,this.stars[r].sourceY,o,o,Math.round(this.stars[r].x),this.stars[r].y,f.config.STAR_SIZE,f.config.STAR_SIZE);this.canvasCtx.drawImage(t.imageSprite,n,this.spritePos.y,i,e,Math.round(this.xPos),this.yPos,h,f.config.HEIGHT),this.canvasCtx.globalAlpha=1,this.canvasCtx.restore()},placeStars:function(){for(var i=Math.round(this.containerWidth/f.config.NUM_STARS),e=0;e<f.config.NUM_STARS;e++)this.stars[e]={},this.stars[e].x=h(i*e,i*(e+1)),this.stars[e].y=h(0,f.config.STAR_MAX_Y),this.stars[e].sourceY=s?t.spriteDefinition.HDPI.STAR.y+2*f.config.STAR_SIZE*e:t.spriteDefinition.LDPI.STAR.y+f.config.STAR_SIZE*e},reset:function(){this.currentPhase=0,this.opacity=0,this.update(!1)}},g.dimensions={WIDTH:600,HEIGHT:12,YPOS:127},g.prototype={setSourceDimensions:function(){for(var t in g.dimensions)s?"YPOS"!=t&&(this.sourceDimensions[t]=2*g.dimensions[t]):this.sourceDimensions[t]=g.dimensions[t],this.dimensions[t]=g.dimensions[t];this.xPos=[0,g.dimensions.WIDTH],this.yPos=g.dimensions.YPOS},getRandomType:function(){return Math.random()>this.bumpThreshold?this.dimensions.WIDTH:0},draw:function(){this.canvasCtx.drawImage(t.imageSprite,this.sourceXPos[0],this.spritePos.y,this.sourceDimensions.WIDTH,this.sourceDimensions.HEIGHT,this.xPos[0],this.yPos,this.dimensions.WIDTH,this.dimensions.HEIGHT),this.canvasCtx.drawImage(t.imageSprite,this.sourceXPos[1],this.spritePos.y,this.sourceDimensions.WIDTH,this.sourceDimensions.HEIGHT,this.xPos[1],this.yPos,this.dimensions.WIDTH,this.dimensions.HEIGHT)},updateXPos:function(t,i){var s=t,e=0==t?1:0;this.xPos[s]-=i,this.xPos[e]=this.xPos[s]+this.dimensions.WIDTH,this.xPos[s]<=-this.dimensions.WIDTH&&(this.xPos[s]+=2*this.dimensions.WIDTH,this.xPos[e]=this.xPos[s]-this.dimensions.WIDTH,this.sourceXPos[s]=this.getRandomType()+this.spritePos.x)},update:function(t,s){var e=Math.floor(s*(i/1e3)*t);this.xPos[0]<=0?this.updateXPos(0,e):this.updateXPos(1,e),this.draw()},reset:function(){this.xPos[0]=0,this.xPos[1]=g.dimensions.WIDTH}},E.config={BG_CLOUD_SPEED:.2,BUMPY_THRESHOLD:.3,CLOUD_FREQUENCY:.5,HORIZON_HEIGHT:16,MAX_CLOUDS:6},E.prototype={init:function(){this.addCloud(),this.horizonLine=new g(this.canvas,this.spritePos.HORIZON),this.nightMode=new f(this.canvas,this.spritePos.MOON,this.dimensions.WIDTH)},update:function(t,i,s,e){this.runningTime+=t,this.horizonLine.update(t,i),this.nightMode.update(e),this.updateClouds(t,i),s&&this.updateObstacles(t,i)},updateClouds:function(t,i){var s=this.cloudSpeed/1e3*t*i,e=this.clouds.length;if(e){for(var n=e-1;n>=0;n--)this.clouds[n].update(s);var h=this.clouds[e-1];e<this.config.MAX_CLOUDS&&this.dimensions.WIDTH-h.xPos>h.cloudGap&&this.cloudFrequency>Math.random()&&this.addCloud(),this.clouds=this.clouds.filter(function(t){return!t.remove})}else this.addCloud()},updateObstacles:function(t,i){for(var s=this.obstacles.slice(0),e=0;e<this.obstacles.length;e++){var n=this.obstacles[e];n.update(t,i),n.remove&&s.shift()}if(this.obstacles=s,this.obstacles.length>0){var h=this.obstacles[this.obstacles.length-1];h&&!h.followingObstacleCreated&&h.isVisible()&&h.xPos+h.width+h.gap<this.dimensions.WIDTH&&(this.addNewObstacle(i),h.followingObstacleCreated=!0)}else this.addNewObstacle(i)},removeFirstObstacle:function(){this.obstacles.shift()},addNewObstacle:function(i){var s=h(0,l.types.length-1),e=l.types[s];if(this.duplicateObstacleCheck(e.type)||i<e.minSpeed)this.addNewObstacle(i);else{var n=this.spritePos[e.type];this.obstacles.push(new l(this.canvasCtx,e,n,this.dimensions,this.gapCoefficient,i,e.width)),this.obstacleHistory.unshift(e.type),this.obstacleHistory.length>1&&this.obstacleHistory.splice(t.config.MAX_OBSTACLE_DUPLICATION)}},duplicateObstacleCheck:function(i){for(var s=0,e=0;e<this.obstacleHistory.length;e++)s=this.obstacleHistory[e]==i?s+1:0;return s>=t.config.MAX_OBSTACLE_DUPLICATION},reset:function(){this.obstacles=[],this.horizonLine.reset(),this.nightMode.reset()},resize:function(t,i){this.canvas.width=t,this.canvas.height=i},addCloud:function(){this.clouds.push(new p(this.canvas,this.spritePos.CLOUD,this.dimensions.WIDTH))}}}();</script>
						<p class='smallest hide-when-presenting'>press 'q' to jump!<p><div id="offline-resources" style="display:none;visibility:hidden;"><img id="offline-resources-1x" src="https://cdn.elg.im/t-rex/v2/assets/default_100_percent/100-offline-sprite.png"><img id="offline-resources-2x" src="https://cdn.elg.im/t-rex/v2/assets/default_200_percent/200-offline-sprite.png"><div id="audio-resources"><audio id="offline-sound-press" src="https://cdn.elg.im/t-rex/sounds/offline-sound-press.mp3"></audio><audio id="offline-sound-hit" src="https://cdn.elg.im/t-rex/sounds/offline-sound-hit.mp3"></audio><audio id="offline-sound-reached" src="https://cdn.elg.im/t-rex/sounds/offline-sound-reached.mp3"></audio></div></div>
					</section>
					<section>
						<h3>Measuring time to occupied</h3>
						<ul>
							<li class="fragment">Time to First Paint</li>
							<li class="fragment">User perceived times</li>
						</ul>
					</section>
				</section>

				<section>
					<section class="pull-up" data-background-image="media/restaurant.jpg">
						<h3 class="dark-bg">2 - Getting Started</h3>
					</section>
					<section>
						<h3>Getting started on the web</h3>
						<ul>
							<li class="fragment">Prioritise critical content</li>
							<li class="fragment">Make it fun!</li>
						</ul>
					</section>
					<section>
						<h3>Show what you've got!</h3>
						<img class="stretch" data-src="media/cnn1.png"/>
					</section>
					<section>
						<h3>Show what you've got!</h3>
						<img class="stretch" data-src="media/cnn2.png"/>
					</section>
					<section>
						<h3>Prioritise what matters</h3>
						<img class="stretch" data-src="media/news_1000ms"/>
						<p class="bottom-right smallest"><a href="https://ldnwebperf.org/sessions/breaking-news-at-1000ms/">Breaking News at 1000ms</a></p>
					</section>
					<section>
						<h3>Measuring time to start</h3>
						<ul>
							<li class="fragment">Time to Title</li>
							<li class="fragment">First Contentful Paint</li>
						</ul>
					</section>
				</section>


				<section>
					<section class="pull-down" data-background-image="media/crosswalk1.jpg"/>
						<h3 class="dark-bg">3 - Wait Anxiety</h3>
						<p class="bottom-right smallest"><a href="https://www.forbes.com/sites/lauriewinkless/2017/10/27/does-pushing-the-button-at-a-crossing-actually-do-anything/">Does Pushing The Button At A Crossing Actually Do Anything?</a></p>
					</section>
					<section>
						<h3>Anxiety on the Web</h3>
						<ul>
							<li class="fragment">Maintain visual stability</li>
							<li class="fragment">Be optimistic!</li>
						</ul>
					</section>
					<section>
						<h3>Maintaining stability</h3>
						<video class="stretch" data-autoplay data-src="media/cnn.mp4"/>
					</section>
					<section class="pull-up">
						<h3>Optimistic UI (1)</h3>
						<video data-autoplay loop data-src="media/twttr_favourite.mov"><a target="_blank" href="media/twttr_favourite.mov">Missing video?</a></video>
					</section>
					<section class="pull-up">
						<h3>Optimistic UI (1)</h3>
						<img data-src="media/twttr_favourite.png"/>
						<aside class="notes">The animation is exactly 300ms, I wonder how close that is to the average response from the API?</aside>
					</section>
					<section class="pull-up">
						<h3>Optimistic UI (1)</h3>
						<img data-src="media/twttr_queue.png"/>
						<aside class="notes">Failed requests are queued and retried</aside>
					</section>
					<section>
						<h3>Optimistic UI (2)</h3>
						<video class="stretch" data-autoplay loop data-src="media/allbirds-mobile.mov"/>
					</section>
					<section>
						<h3>Reducing wait anxiety</h3>
						<ul>
							<li>Avoid layout shifts</li>
							<li>Use optimistic UI patterns</li>
						</ul>
					</section>
				</section>


				<section>
					<section class="pull-up" data-background-image="media/park_queue.jpg"/>
						<h3 class="dark-bg">4 - Uncertain Waits</h3>
					</section>
					<section>
						<h3>Uncertainty on the web</h3>
						<aside class="notes">Show something recognisable like a site logo, give progress indication.</aside>
						<ul>
							<li class="fragment">Anchor your user</li>
							<li class="fragment">Give a timeline</li>
							<li class="fragment">Update every 1,000ms</li>
						</ul>
					</section>
					<section>
						<h3>Site logos are user anchors</h3>
						<img class="stretch" data-src="media/forbes.jpg"/>
						<p class="smallest bottom-right"><a href="https://www.webpagetest.org/video/compare.php?tests=201013_Di94_3573a8bf92b4e9f548eafe525543bb2b-r%3A1-c%3A0&thumbSize=200&ival=50&end=visual">Forbes Article WPT Result</a></p>
					</section>
					<section>
						<h3>Creating certainty on buttons</h3>
						<style>@-webkit-keyframes short-press{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(.9);transform:scale(.9)}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes short-press{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(.9);transform:scale(.9)}100%{-webkit-transform:scale(1);transform:scale(1)}}.submit-button{display:block;margin:2em auto;zoom:2;font-family:inherit;font-weight:300;font-size:.75em;height:39px;line-height:39px;overflow:hidden;background:#4dbecf;border-radius:3px;box-shadow: 1px 2px 8px 0px rgb(60 54 68);border:0;cursor:pointer;-webkit-transition:all .3s ease;transition:all .3s ease}.submit-button:focus,.submit-button:hover{outline:0}.submit-button.animated{-webkit-animation:.75s short-press cubic-bezier(.77,0,.175,1) forwards;animation:.75s short-press cubic-bezier(.77,0,.175,1) forwards}.submit-button>span{display:block;color:#fff;text-align:center}.submit-button>span.pre-state-msg{-webkit-transition:all .7s cubic-bezier(.77,0,.175,1);transition:all .7s cubic-bezier(.77,0,.175,1);-webkit-transition-delay:.75s;transition-delay:.75s}.submit-button.state-1 .pre-state-msg{margin-top:-38px}.submit-button.state-2 .pre-state-msg{margin-top:-76px}</style>
						<button class="submit-button state-0"><span class="pre-state-msg">Add to bag</span><span class="current-state-msg">Adding...</span><span class="done-state-msg">Done!</span></button>
						<script>const button=document.querySelector(".submit-button"),stateMsg=document.querySelector(".pre-state-msg"),updateButtonMsg=function(){button.classList.add("state-1","animated"),setTimeout(finalButtonMsg,2e3)},finalButtonMsg=function(){button.classList.add("state-2"),setTimeout(setInitialButtonState,2e3)},setInitialButtonState=function(){button.classList.remove("state-1","state-2","animated")};button.addEventListener("click",updateButtonMsg);</script>
					</section>
					<section>
						<h3>Provide visual feedback</h3>
						<video data-autoplay loop data-src="media/socks.mov"><a target="_blank" href="media/socks.mov">Missing video?</a></video>
					</section>
					<section>
						<h3>Reducing wait uncertainty</h3>
						<ul>
							<li>Show your logo early</li>
							<li>Give instant interaction feedback</li>
							<li>Use activity indicators</li>
						</ul>
					</section>
				</section>


				<section>
					<section class="pull-up" data-background-image="media/delayed.jpg"/>
						<h3 class="dark-bg">5 - Unexplained Waits</h3>
					</section>
					<section>
						<h3>Explaining waits on the web</h3>
						<aside class="notes">Describe why the user is waiting, what the back-end is doing etc.</aside>
						<ul>
							<li class="fragment">Humanise the task</li>
							<li class="fragment">Give progress indication</li>
						</ul>
					</section>
					<section>
						<h3>Humanise the Task</h3>
						<img class="stretch" data-src="media/amazon_stockroom.jpg"/>
					</section>
					<section>
						<h3>Explain the wait</h3>
						<img class="stretch" data-src="media/ctm.jpg"/>
					</section>
					<section>
						<h3>Reducing unexplained waits</h3>
						<ul>
							<li>Humanise the wait</li>
							<li>Use progress indicators</li>
						</ul>
					</section>
				</section>


				<section>
					<section class="pull-down" data-background-image="media/ctm.jpg"/>
						<h3 class="dark-bg">6 - Valuable Waits</h3>
					</section>
					<section>
						<h3>Make long waits feel valuable</h3>
						<ul>
							<li class="fragment">Explain the wait</li>
							<li class="fragment">Indicate progress</li>
						</ul>
					</section>
					<section>
						<h3>Anticipating waits</h3>
						<img class="stretch" data-src="media/autotrader.png"/>
						<p class="smallest bottom-right"><a href="https://www.autotrader.co.uk/">autotrader.co.uk</a></p>
					</section>
					<section>
						<h3>Combined wait strategy</h3>
						<img class="stretch" data-src="media/skyscanner.jpg"/>
						<p class="smallest bottom-right"><a href="https://www.skyscanner.net/">skyscanner.net</a></p>
					</section>
					<section>
						<h3>Make long waits feel valuable</h3>
						<ul>
							<li>Explain the wait</li>
							<li>Indicate progress</li>
						</ul>
					</section>
				</section>

				<section>
					<h3>Six rules for waiting times</h3>
					<ol>
						<li class="fragment">Occupy user's time</li>
						<li class="fragment">Let users get started ASAP</li>
						<li class="fragment">Reduce wait anxiety</li>
						<li class="fragment">Use progress indication</li>
						<li class="fragment">Explain long waits</li>
						<li class="fragment">Describe the value</li>
					</ol>
				</section>
				<section>
					<section data-background-image="../backgrounds/string.jpeg">
						<h3 class="dark-bg">How do we measure waits?</h3>
					</section>
					<section>
						<h3>Web wait types</h3>
						<ol>
							<li data-autoslide="750" class="fragment">Page loads</li>
							<li data-autoslide="750" class="fragment">In-app Navigations</li>
							<li class="fragment">User Actions</li>
						</ol>
					</section>

					<section>
						<h3>HCI Principles</h3>
						<ul>
							<li data-autoslide="750" class="fragment">Give feedback within <b>100ms</b></li>
							<li data-autoslide="750" class="fragment">Update every <b>1,000ms</b></li>
							<li data-autoslide="1500" class="fragment">Complete actions within <b>3,000ms</b></li>
						</ul>
						<p class="fragment smaller bottom-right">Miller, R. B. (1968). Response time in man-computer conversational transactions.</p>
					</section>

					<section>
						<h3>Layout Shift Impacts Bounce</h3>
						<img class="stretch" data-src="media/cls-query-customer3-landing-page-cls-vs-bounce.svg"/>
						<p class="smallest bottom-right"><a href="https://nicj.net/cumulative-layout-shift-in-the-real-world/">Cumulative Layout Shift in the Real World</a></p>
					</section>
					<section>
						<h3>Layout Shift Impacts Session Length</h3>
						<img class="stretch" data-src="media/cls-query-customer2-landing-page-cls-vs-session-length.svg"/>
						<p class="smallest bottom-right"><a href="https://nicj.net/cumulative-layout-shift-in-the-real-world/">Cumulative Layout Shift in the Real World</a></p>
					</section>
					<section>
						<h3>Layout Shifts Cause Rage</h3>
						<img class="stretch" data-src="media/cls-query-all-vs-rage-clicks.svg"/>
						<p class="smallest bottom-right"><a href="https://nicj.net/cumulative-layout-shift-in-the-real-world/">Cumulative Layout Shift in the Real World</a></p>
					</section>

					<section>
						<h3>Goals for maximum engagement</h3>
						<table class="compact">
							<tr><th>Metric</th><th>Goal</th></tr>
							<tr><td>Cumulative Layout Shift</td><td>0.05</td></tr>
							<tr><td>First Input Delay</td><td>100ms</td></tr>
							<tr><td>First Contentful Paint</td><td>1,000ms</td></tr>
							<tr><td>Largest Contentful Paint</td><td>3,000ms</td></tr>
							<tr><td>Time To Interactive</td><td>3,500ms</td></tr>
						</table>
						<p class="smallest bottom-right">Based on aggregate data - what are yours?</p>
					</section>
				</section>

				<section>
					<section>
						<h3>Top tips for happy users</h3>
						<ul>
							<li class="fragment">Prioritise critical content</li>
							<li class="fragment">Avoid unexpected layout shifts</li>
							<li class="fragment">Respond ~immediately to input</li>
						</ul>
					</section>
					<section data-background-image="../backgrounds/thinking.jpg">
						<p class="dark-bg">this sounds familiar...</p>
					</section>
					<section>
						<h3>Google is measuring these for SEO</h3>
						<img class="stretch" data-src="media/vitals.png"/>
						<p class="smallest bottom-right"><a href="https://web.dev/vitals/">web.dev/vitals</a></p>
					</section>
					<section>
						<h3>Top tips for happy users</h3>
						<ul>
							<li>Prioritise critical content</li>
							<li>Avoid layout shifts</li>
							<li>Respond ~immediately to input</li>
							<li class="fragment">Provide contextual feedback</li>
							<li class="fragment">Use optimistic patterns</li>
							<li class="fragment">Explain long waits (>3s)</li>
						</ul>
					</section>
					<section>
						<h3>Top tips for happy developers</h3>
						<ul>
							<li class="fragment">Measure where your customers are</li>
							<li class="fragment">Measure what matters</li>
							<li class="fragment">Socialise performance stats</li>
						</ul>
					</section>
					<section>
						<h3>RUM is critical</h3>
						<img class="stretch" data-src="media/mpulse1.jpg"/>
						<p class="subtitle smallest bottom-right"><a href="https://blogs.akamai.com/2020/10/measuring-improving-core-web-vitals.html">Measuring &amp; Improving Core Web Vitals</a></p>
					</section>
				</section>

				<section data-state="main-slide">
					<section>
						<h3>Hacking perceived waits<span class="fragment subtitle">AKA: making waits feel less waity</span></h3>
					</section>

					<section>
						<h3>Anticipate Behaviour<span class="subtitle">cheat with mouse events</span></h3>
						<button id="demo-btn-1" class="btn-big animate-hover" style="cursor:pointer;">Click Me!</button>
						<table style="font-size: 75%;" id="demo-btn-results">
							<tr><th>Event</th><th>Free Time!</th></tr>
							<tr><td>touchStart</td><td id="demo-btn-touch">-</td></tr>
							<tr><td>mouseOver</td><td id="demo-btn-hover">-</td></tr>
							<tr><td>mouseDown</td><td id="demo-btn-down">-</td></tr>
							<tr><td>click</td><td id="demo-btn-click">-</td></tr>
						</table>
						<p class="smaller">Use to anticipate navigations, product viewer actions etc.</p>
					</section>
					<section>
						<h3>Use skeleton UI <span class="subtitle">with caution </span></h3>
						<img class="stretch" data-src="media/skeleton.gif"/>
						<p class="subtitle smallest bottom-right"><a href="https://www.smashingmagazine.com/2020/04/skeleton-screens-react/">Implementing Skeleton Screens in React</a></p>
					</section>
					<section>
						<h3>Non-linear progress indicators</h3>
						<aside class="notes">If the early feedback indicated slow progress, abandonment rates were higher and users' subjective experience more negative than if the early feedback indicated faster progress.</aside>
						<style>
							.progress_bar {
								margin: 28px auto !important;
								width: 450px;
								//max-width:80%;
								height: 20px;
								box-shadow: 0px 0px 4px #ffffffd1;
								border-radius: 20px;
								position: relative;
								overflow: hidden;
								cursor:pointer;
							}
							.progress_bar:before {
								left: -100%;
								content: '';
								width: 200%;
								height: 100%;
								position: absolute;
								background: linear-gradient(to right, #7ff224 0%,#4c6f12 50%,#d2d2d2 50%,#d2d2d2 100%);
							}
							.progress_bar.progress_bar_linear:before {
								animation: progress-anime 7s linear infinite;
							}
							.progress_bar.progress_bar_deccel:before {
								animation: progress-anime 7s cubic-bezier(0, 0, 0, 0.5) infinite;
							}
							.progress_bar.progress_bar_accel:before {
								animation: progress-anime 7s cubic-bezier(0.5, 0, 1, 1)  infinite;
							}
							.progress_bar.progress_bar_both:before {
								animation: progress-anime 7s ease-in-out  infinite;
							}

							@keyframes progress-anime {
								0% {left: -100%;}
								70% {left: 0;}
								100% {left: 0;}
							}
						</style>
						<div class="progress_bar" data-progress="linear" onclick="this.classList.toggle('progress_bar_'+this.getAttribute('data-progress'))"></div>
						<div class="progress_bar" data-progress="deccel" onclick="this.classList.toggle('progress_bar_'+this.getAttribute('data-progress'))"></div>
						<div class="progress_bar" data-progress="accel" onclick="this.classList.toggle('progress_bar_'+this.getAttribute('data-progress'))"></div>
						<div class="progress_bar" data-progress="both" onclick="this.classList.toggle('progress_bar_'+this.getAttribute('data-progress'))"></div>
						<div class="smaller"><a id="progress_bar_all">all</a> | <a id="progress_bar_none">none</a>
						<script>
							document.getElementById("progress_bar_all").addEventListener('click',()=>{
								let pbs = document.querySelectorAll(".progress_bar");
								pbs.forEach(pb => {
									pb.classList.add('progress_bar_'+pb.getAttribute('data-progress'));
								})
							})
							document.getElementById("progress_bar_none").addEventListener('click',()=>{
								let pbs = document.querySelectorAll(".progress_bar");
								pbs.forEach(pb => {
									pb.classList.remove('progress_bar_'+pb.getAttribute('data-progress'));
								})
							})
						</script>
						<p class="subtitle smallest bottom-right"><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2910434/">The impact of progress indicators on task completion</a></p>
					</section>
					<section>
						<h3>Use the platform</h3>
						<ul>
							<li class="fragment">Native lazy-loading</li>
							<li class="fragment">HTML5(!)</li>
							<li class="fragment">Service Worker</li>
						</ul>
					</section>
					<section data-background-image="media/shoot_door.jpg" class="pull-up">
						<h3 class="dark-bg">If in doubt, play games!</h3>
							<p class="subtitle smallest bottom-right"><a href="https://www.wired.com/2016/04/average-webpage-now-size-original-doom">The Average Webpage Is Now the Size of the Original Doom (2016)</a></p>			
					</section>
				</section>

				<section class="pull-up" data-background-image="../backgrounds/passion.jpg">
					<h2 class="dark-bg">Thank you </h2>
				</section>
			</div>
			<div id="chart-controls" class="hide"></div>

		</div>

		<script  src="../lib/js/head.min.js"></script>
		<script  src="../js/reveal.js"></script>
		<script  src="../lib/js/jquery-3.3.1.min.js"></script>

		<script>
			function getQueryVariable(variable)
			{
				var query = window.location.search.substring(1);
				var vars = query.split("&");
				for (var i=0;i<vars.length;i++) {
						var pair = vars[i].split("=");
						if(pair[0] == variable){return pair[1];}
				}
				return(false);
			}
			var presenting = window.location.search.includes('present');
			var duration = getQueryVariable('duration') || 30;
			var hasCode = !!document.querySelector('code');
			var hasAnims = !!document.querySelector('[data-animate]');
			var keyboard = {
				// pause/resume time when Enter is pressed
				13: () => {
					ElapsedTimeBar.isPaused ? ElapsedTimeBar.resume() : ElapsedTimeBar.pause();
				},
				// reset timer when 'r' is pressed
				82: () => {
					ElapsedTimeBar.reset();
				}
			}
			if (!presenting) {
				let id = document.getElementById('help-text');
				if (id) {
					id.innerHTML = "Use 'n' and 'p' to navigate next and previous slides.<br>Use 'o' to view an overview."
				}
			} else {
				document.body.classList.add("presenting");
				keyboard = Object.assign(keyboard,
				{
					39: 'next',
					37: 'prev'
				});
			}
			function getFragment(event) {
				return (event.currentSlide.id !== "" ? event.currentSlide.id : null);
			}
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: !presenting,
				progress: true,
				history: true,
				center: true,

				transition: 'none', // none/fade/slide/convex/concave/zoom

				allottedTime: duration * 60 * 1000, // 30 minutes
				barColor: 'hsl(220,99%,54%)',

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: '../lib/js/classList.js', 				async: true, condition: function() { return !document.body.classList; } },
					{ src: '../plugin/markdown/marked.js', 			async: true, condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../plugin/markdown/markdown.js', 		async: true, condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../plugin/embed-tweet/embed-tweet.js', 	async: true, condition: function() { return !!document.querySelector( 'div.tweet[data-src]' ); } },
					{ src: '../lib/js/vega.min.js', 				condition: function() { return !!document.querySelector( 'div.vega-chart' ); } },
					{ src: '../lib/js/vega-embed.min.js', 			condition: function() { return !!document.querySelector( 'div.vega-chart' ); } },
					{ src: '../plugin/elapsed-time-bar/elapsed-time-bar.js', async: true, condition: function() { return presenting}},
					{ src: '../plugin/highlight/highlight.js', 		async: true, condition: function() {return hasCode},async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: '../plugin/search/search.js', 			async: true },
					{ src: '../plugin/zoom-js/zoom.js', 			async: true },
					{ src: '../plugin/notes/notes.js', 				async: true }
				],

				keyboard: keyboard
			});
			Reveal.addEventListener( 'slidechanged', function( event ) {
				let state = {h: event.indexh, v: event.indexv, name: getFragment(event)};
			} );

			/* animate.css */
			// Set animation delay if data-delay is specified
			Reveal.addEventListener('ready', function ( event ) {
				$('*[data-delay]').each( function () { 
					var delay = $(this).attr("data-delay");
					$(this).css("-webkit-animation-delay", delay+"s"); 
					$(this).css("animation-delay", delay+"s"); 
				});
			});

			// Set animation duration if data-duration is specified
			Reveal.addEventListener('ready', function ( event ) {
				$('*[data-duration]').each( function () { 
					var duration = $(this).attr("data-duration");
					$(this).css("-webkit-animation-duration", duration+"s"); 
					$(this).css("animation-duration", duration+"s"); 
				});
				$('.demo-bar').each( function() {
					this.addEventListener("click", () => {
						let demo = this.attributes.getNamedItem("data-demo")
						if (demo) {
							let id = "#demo-bar-"+demo.value;
							$(id).toggleClass("demo-on");
						}
					})
				});
				
				$('#demo-reset').click(function() {
					$('.demo-bar.demo-foreground').css('opacity',0).removeClass("demo-on");
					window.setTimeout(function() {
						$('.demo-bar.demo-foreground').css('opacity',1)
					},1300);
				});
				$('#demo-all').click(function() {
					$('.demo-bar.demo-foreground').addClass("demo-on");
				});
				let width = window.innerWidth / 2;
				$(".vega-chart").each(function() {
					let spec = this.attributes.getNamedItem("data-spec").value;
					//spec = "https://raw.githubusercontent.com/vega/vega/master/docs/examples/bar-chart.vg.json";
					vegaEmbed('#'+this.id, spec, {"actions": false, "theme": "dark", "width": width, "renderer": "svg", "config": "data/config.json"}).then(function(result) {
					// Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
					}).catch(console.error);
				});
				window.demoBtnData = {"mouseover":null,"mousedown":null,"touchstart":null};
				document.getElementById('demo-btn-1').addEventListener("touchstart",()=>{window.demoBtnData.touchstart=performance.now()});
				document.getElementById('demo-btn-1').addEventListener("mouseover",()=>{window.demoBtnData.mouseover=performance.now()});
				document.getElementById('demo-btn-1').addEventListener("mousedown",()=>{window.demoBtnData.mousedown=performance.now()});
				document.getElementById('demo-btn-1').addEventListener("click",()=>{
					let now = performance.now();
					window.demoBtnData.mouseover &&	(document.getElementById("demo-btn-hover").innerHTML = (now - window.demoBtnData.mouseover).toFixed(2)+'ms');
					window.demoBtnData.touchstart && (document.getElementById("demo-btn-touch").innerHTML = (now - window.demoBtnData.touchstart).toFixed(2)+'ms');
					window.demoBtnData.mousedown && (document.getElementById("demo-btn-down").innerHTML = (now - window.demoBtnData.mousedown).toFixed(2)+'ms');
					document.getElementById("demo-btn-click").innerHTML = "0ms";
				});
				/*
				document.getElementById('demo-btn-3').addEventListener("mouseover",()=>{
					fetch('media/pavlov.jpg').then(console.log('Pavlov Fetched!'));
				});
				document.getElementById('demo-btn-3').addEventListener("click",()=>{
					document.getElementById("demo-btn-img-3").innerHTML = "<img src='media/freud.jpg'/>";
				});
				document.getElementById('demo-btn-2').addEventListener("click",()=>{
					document.getElementById("demo-btn-img-2").innerHTML = "<img src='media/pavlov.jpg'/>";
				});
				*/
				
			});

			// Animate items that are not in a fragment
				Reveal.addEventListener('slidechanged', function( event ) {
				// Animate elements that are not a fragment (or in a fragment)
				var filter = '*[data-animate]:not(.fragment):not(.fragment *)';
				
				$(event.currentSlide).find(filter).each( function () {
					$(this).addClass('animated');
					$(this).addClass($(this).attr('data-animate'));
				});		
				$(event.previousSlide).find(filter).each( function () {
					$(this).removeClass('animated');
					$(this).removeClass($(this).attr('data-animate'));
				});		
				});

				// Animate fragments
				Reveal.addEventListener('fragmentshown', function( event ) {
					function loop(i, el) { 
						if ($(el).attr('data-animate')) {
							$(el).addClass('animated');
							$(el).addClass($(el).attr('data-animate'));
						}
						$.each($(el).children().not('.fragment'), loop);
					};
					$.each(event.fragments, loop);
				});

				// Make the animation runnable again if fragment is hidden
				Reveal.addEventListener('fragmenthidden', function( event ) {	  
				function loop(i, el) { 
					if ($(el).attr('data-animate')) {
						$(el).removeClass('animated');
						$(el).removeClass($(el).attr('data-animate'));
					}
					$.each($(el).children().not('.fragment'), loop);
				};
				$.each(event.fragments, loop);
			});
			if (hasCode) {
				var l = document.createElement('link');
				l.rel="stylesheet";
				l.href = "../lib/css/zenburn.css"
				document.head.appendChild(l);
			}
			if (hasAnims) {
				var l = document.createElement('link');
				l.rel="stylesheet";
				l.href = "../lib/css/animate.min.css"
				document.head.appendChild(l);
			}
		</script>

		<script nonce="googleAnalytics">
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();
			i.initAnalytics=function(){a=s.createElement(o),m=s.getElementsByTagName(o)[0];
			a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			}})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			
			ga('create', 'UA-6512525-16', 'auto', {'siteSpeedSampleRate': 100});
			ga('send', 'pageview');
			
			window.addEventListener('load',function(){initAnalytics()});
		</script>
	</body>
</html>
